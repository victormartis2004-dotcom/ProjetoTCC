@model ProjetoTCC.ViewModels.CadastroViewModel

@{
    ViewData["Title"] = "Minha Ficha";

    string imcDescricao = "";
    double imc = 0;

    if (Model.Altura > 0 && Model.Peso > 0)
    {
        // Corrige o tipo decimal para double corretamente
        double alturaMetros = (double)(Model.Altura / 100m);
        imc = (double)Model.Peso / (alturaMetros * alturaMetros);

        if (imc < 18.5)
            imcDescricao = "Abaixo do peso";
        else if (imc < 25)
            imcDescricao = "Peso normal";
        else if (imc < 30)
            imcDescricao = "Sobrepeso";
        else if (imc < 35)
            imcDescricao = "Obesidade Grau I";
        else if (imc < 40)
            imcDescricao = "Obesidade Grau II";
        else
            imcDescricao = "Obesidade Grau III";
    }
    else
    {
        imcDescricao = "Dados insuficientes";
    }
}

<link rel="stylesheet" href="~/css/perfil.css" />

<div class="perfil-page">
    <div class="perfil-card">
        <h2>@ViewData["Title"]</h2>

        <div class="perfil-info">
            <label>Nome:</label>
            <div>@Model.Nome @Model.Sobrenome</div>
        </div>

        <div class="perfil-info">
            <label>Data de Nascimento:</label>
            <div>@Model.DataNascimento.ToString("dd/MM/yyyy")</div>
        </div>

        <div class="perfil-info">
            <label>Email:</label>
            <div>@Model.Email</div>
        </div>

        <div class="perfil-info">
            <label>Altura:</label>
            <div>@String.Format("{0:0.00} m", Model.Altura / 100m)</div>
        </div>

        <div class="perfil-info">
            <label>Peso:</label>
            <div>@String.Format("{0:0.00} kg", Model.Peso)</div>
        </div>

        <div class="perfil-info">
            <label>IMC:</label>
            <div>
                @(imc > 0 ? $"{imc.ToString("0.00")} — {imcDescricao}" : imcDescricao)
            </div>
        </div>

        <div class="perfil-buttons">
            <a href="@Url.Action("Editar", "Perfil")" class="perfil-btn perfil-btn-primary">Editar</a>
            <a href="@Url.Action("Index", "Home")" class="perfil-btn perfil-btn-secondary">Voltar</a>
        </div>
    </div>
</div>
